<!DOCTYPE html>
<html>
<head>
    <title>Guest Dashboard | DAM</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<nav class="navbar navbar-dark bg-secondary px-4">
    <span class="navbar-brand">DAM – Guest Dashboard</span>
    <button onclick="logout()" class="btn btn-light btn-sm">Logout</button>
</nav>

<div class="container mt-5">

    <div class="card shadow-sm text-center">
        <div class="card-body">
            <h4>System Status</h4>
            <h2 class="text-success">Running ✅</h2>
            <hr>
            <h6>Total Database Activities</h6>
            <h1 id="totalActivities">0</h1>
            <p class="text-muted mt-3">
                Guest access is <strong>read-only</strong>.  
                Detailed logs and SQL text are restricted.
            </p>
        </div>
    </div>

</div>

<script>
async function loadGuestData() {
    const res = await fetch("/api/guest/summary");
    const data = await res.json();
    document.getElementById("totalActivities").innerText = data.total_activities;
}

function logout() {
    fetch("/api/logout", {method: "POST"}).then(() => window.location = "/");
}

loadGuestData();
</script>

</body>
</html>
